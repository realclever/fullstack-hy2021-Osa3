{"version":3,"sources":["components/Filter.js","services/persons.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/NotificationSuccess.js","components/NotificationFailure.js","App.js","index.js"],"names":["Filter","newFilter","handleFilterChange","placeholder","value","onChange","baseUrl","mods","getAll","a","request","axios","get","response","data","create","newObject","post","update","id","put","remove","delete","PersonForm","persons","newName","newNumber","setPersons","setNewName","setNewNumber","handleNameChange","handleNumberChange","setNewSuccessMessage","setNewFailureMessage","updatePerson","person","find","p","replacement","number","personsService","then","result","map","setTimeout","catch","error","length","console","log","name","filter","onSubmit","event","preventDefault","personObject","includes","window","confirm","concat","type","Person","removePerson","onClick","Persons","showAllPersons","personsToShowFilter","toLowerCase","className","NotificationSuccess","message","NotificationFailure","App","useState","setNewFilter","successMessage","failureMessage","useEffect","initialPersons","target","findToBeDeleted","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.da30e6f3.chunk.js","sourcesContent":["import React from \"react\";\n\nconst Filter = ({ newFilter, handleFilterChange }) => {\n  return (\n    <>\n      <input\n        placeholder=\"Filter shown with\"\n        value={newFilter}\n        onChange={handleFilterChange}\n      />\n    </>\n  );\n};\n\nexport default Filter;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = async () => {\n  const request = axios.get(baseUrl);\n  const response = await request;\n  return response.data;\n};\n\nconst create = async (newObject) => {\n  const request = axios.post(baseUrl, newObject);\n  const response = await request;\n  return response.data;\n};\n\nconst update = async (id, newObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\n  const response = await request;\n  return response.data;\n};\n\nconst remove = async (id) => {\n  const request = axios.delete(`${baseUrl}/${id}`);\n  const response = await request;\n  return response.data;\n};\n\n//removes the unwanted warning.\nconst mods = { getAll, create, update, remove };\nexport default mods;\n","import React from \"react\";\nimport personsService from \"../services/persons\";\n\nconst PersonForm = ({\n  persons,\n  newName,\n  newNumber,\n  setPersons,\n  setNewName,\n  setNewNumber,\n  handleNameChange,\n  handleNumberChange,\n  setNewSuccessMessage,\n  setNewFailureMessage,\n}) => {\n  const addPerson = (event) => {\n    event.preventDefault();\n    const personObject = {\n      name: newName,\n      number: newNumber,\n    };\n    if (persons.map((persons) => persons.name).includes(newName)) {\n      window.confirm(\n        `${newName} is already added to phonebook, replace the old number with ${newNumber}?`\n      );\n      updatePerson(persons.filter((p) => p.name === newName)[0].id);\n      setNewName(\"\");\n      setNewNumber(\"\");\n      console.log(\"number updated:\", newName);\n    } else {\n      personsService\n        .create(personObject)\n        .then((result) => {\n          setPersons(persons.concat(result));\n          setNewName(\"\");\n          setNewNumber(\"\");\n          setNewSuccessMessage(`Added ${newName} to contacts`);\n          setTimeout(() => {\n            setNewSuccessMessage(null);\n          }, 3000);\n          console.log(\"added new contact\", result);\n        })\n        .catch((error) => {\n          if (newName.length < 3) {\n            setNewFailureMessage(\n              `Person validation failed: name: (${newName}) is shorter than the minimum allowed length (3).`\n            );\n            setTimeout(() => {\n              setNewFailureMessage(null);\n            }, 3000);\n          }\n          if (newNumber.length < 8) {\n            setNewFailureMessage(\n              `Person validation failed: number: (${newNumber}) is shorter than the minimum allowed length (8).`\n            );\n            setTimeout(() => {\n              setNewFailureMessage(null);\n            }, 3000);\n          }\n          if (newNumber.length < 8 && newName.length < 3) {\n            setNewFailureMessage(\n              `Person validation failed: name: (${newName}) is shorter than the minimum allowed length (3)., number: (${newNumber}) is shorter than the minimum allowed length (8).`\n            );\n            setTimeout(() => {\n              setNewFailureMessage(null);\n            }, 3000);\n          }\n        });\n    }\n  };\n\n  const updatePerson = (id) => {\n    const person = persons.find((p) => p.id === id);\n    const replacement = { ...person, number: newNumber };\n\n    personsService\n      .update(id, replacement)\n      .then((result) => {\n        setPersons(\n          persons.map((person) => (person.id !== id ? person : result))\n        );\n        setNewSuccessMessage(`Updated ${newName}'s number to ${newNumber} `);\n        setTimeout(() => {\n          setNewSuccessMessage(null);\n        }, 3000);\n      })\n      .catch((error) => {\n        if (newNumber.length < 8) {\n          setNewFailureMessage(\n            `Person validation failed: number: (${newNumber}) is shorter than the minimum allowed length (8).`\n          );\n          setTimeout(() => {\n            setNewFailureMessage(null);\n          }, 3000);\n        } else {\n          console.log(\"something very strange just happened\", error);\n          setNewFailureMessage(\n            `Information of ${person.name} has already been removed from server`\n          );\n          setTimeout(() => {\n            setNewFailureMessage(null);\n          }, 3000);\n          setPersons(persons.filter((p) => p.id !== id));\n        }\n      });\n  };\n\n  return (\n    <>\n      <form onSubmit={addPerson}>\n        <>\n          <h3> Add new contact</h3>\n          <input\n            placeholder=\"Enter name\"\n            value={newName}\n            onChange={handleNameChange}\n          />\n        </>\n        <>\n          <input\n            placeholder=\"Enter number\"\n            value={newNumber}\n            onChange={handleNumberChange}\n          />\n        </>\n        <button type=\"submit\">add</button>\n      </form>\n    </>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Person = ({ persons, removePerson }) => {\n  return (\n    <>\n      <li>\n        {persons.name} {persons.number} <span>&nbsp;</span>\n        <button onClick={() => removePerson(persons.id)}>remove</button>\n      </li>\n    </>\n  );\n};\n\nexport default Person;\n","import React from \"react\";\nimport Person from \"./Person\";\n\nconst Persons = ({ persons, newFilter, showAllPersons, removePerson }) => {\n  const personsToShowFilter = showAllPersons\n    ? persons\n    : persons.filter((person) =>\n        person.name.toLowerCase().includes(newFilter.toLowerCase())\n      );\n\n  return (\n    <>\n      <ul className=\"no-bullets\">\n        {personsToShowFilter.map((persons) => (\n          <Person\n            key={persons.name}\n            persons={persons}\n            removePerson={removePerson}\n          />\n          //using Person component\n        ))}\n      </ul>\n    </>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst NotificationSuccess = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"success\">{message}</div>;\n};\n\nexport default NotificationSuccess;\n","import React from \"react\";\n\nconst NotificationFailure = ({ message }) => {\n  if (message === null) {\n    return null;\n  }\n\n  return <div className=\"failure\">{message}</div>;\n};\n\nexport default NotificationFailure;\n","import React, { useState, useEffect } from \"react\";\nimport Filter from \"./components/Filter\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport personsService from \"./services/persons\";\nimport NotificationSuccess from \"./components/NotificationSuccess\";\nimport \"./index.css\";\nimport NotificationFailure from \"./components/NotificationFailure\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [newFilter, setNewFilter] = useState(\"\");\n  const [successMessage, setNewSuccessMessage] = useState(\"\");\n  const [failureMessage, setNewFailureMessage] = useState(\"\");\n\n  useEffect(() => {\n    personsService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n      console.log(\"current set of names\", initialPersons);\n    });\n  }, []);\n\n  const handleNameChange = (event) => {\n    //console.log(event.target.value);\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = (event) => {\n    //console.log(event.target.value);\n    setNewNumber(event.target.value);\n  };\n\n  const handleFilterChange = (event) => {\n    //console.log(event.target.value);\n    setNewFilter(event.target.value);\n  };\n\n  //became a mess and couldn't get it to work as part of a component.\n  const removePerson = (id) => {\n    //little helper\n    const findToBeDeleted = {\n      ...persons.find((p) => p.id === id),\n    };\n    if (window.confirm(`Delete '${findToBeDeleted.name}'?`)) {\n      personsService\n        .remove(id)\n        .then(() => {\n          setPersons(persons.filter((p) => p.id !== id));\n          setNewSuccessMessage(`Removed ${findToBeDeleted.name} from contacts`);\n          setTimeout(() => {\n            setNewSuccessMessage(null);\n          }, 3000);\n          console.log(`Removed ${findToBeDeleted.name}`);\n        })\n        //now the app won't crash if the user tries to remove already removed contant\n        .catch((error) => {\n          console.log(\"something very strange just happened\", error);\n          setNewFailureMessage(\n            `Information of ${findToBeDeleted.name} has already been removed from server`\n          );\n          setTimeout(() => {\n            setNewFailureMessage(null);\n          }, 3000);\n          setPersons(persons.filter((p) => p.id !== id));\n        });\n    }\n  };\n\n  return (\n    <>\n      <h2>Phonebook</h2>\n      <NotificationSuccess message={successMessage} />\n      <NotificationFailure message={failureMessage} />\n\n      <Filter newFilter={newFilter} handleFilterChange={handleFilterChange} />\n\n      <PersonForm\n        persons={persons}\n        newName={newName}\n        newNumber={newNumber}\n        setPersons={setPersons}\n        setNewName={setNewName}\n        setNewNumber={setNewNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n        setNewSuccessMessage={setNewSuccessMessage}\n        setNewFailureMessage={setNewFailureMessage}\n      />\n\n      <h2>Numbers</h2>\n      <Persons\n        persons={persons}\n        newFilter={newFilter}\n        removePerson={removePerson}\n      />\n    </>\n  );\n};\n\nexport default App;\n","import ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}