(this.webpackJsonppuhelinluettelo=this.webpackJsonppuhelinluettelo||[]).push([[0],{42:function(e,n,t){},43:function(e,n,t){"use strict";t.r(n);var r=t(17),a=t.n(r),c=t(5),o=t(4),u=t(1),s=t(0),i=function(e){var n=e.newFilter,t=e.handleFilterChange;return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("input",{placeholder:"Filter shown with",value:n,onChange:t})})},l=t(3),m=t.n(l),d=t(6),h=t(7),f=t.n(h),b="/api/persons",j={getAll:function(){var e=Object(d.a)(m.a.mark((function e(){var n,t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=f.a.get(b),e.next=3,n;case 3:return t=e.sent,e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),create:function(){var e=Object(d.a)(m.a.mark((function e(n){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.post(b,n),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),update:function(){var e=Object(d.a)(m.a.mark((function e(n,t){var r,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=f.a.put("".concat(b,"/").concat(n),t),e.next=3,r;case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(n,t){return e.apply(this,arguments)}}(),remove:function(){var e=Object(d.a)(m.a.mark((function e(n){var t,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=f.a.delete("".concat(b,"/").concat(n)),e.next=3,t;case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}()},p=function(e){var n=e.persons,t=e.newName,r=e.newNumber,a=e.setPersons,o=e.setNewName,u=e.setNewNumber,i=e.handleNameChange,l=e.handleNumberChange,m=e.setNewSuccessMessage,d=e.setNewFailureMessage,h=function(e){var o=n.find((function(n){return n.id===e})),u=Object(c.a)(Object(c.a)({},o),{},{number:r});j.update(e,u).then((function(c){a(n.map((function(n){return n.id!==e?n:c}))),m("Updated ".concat(t,"'s number to ").concat(r," ")),setTimeout((function(){m(null)}),3e3)})).catch((function(t){r.length<8?(d("Person validation failed: number: (".concat(r,") is shorter than the minimum allowed length (8).")),setTimeout((function(){d(null)}),3e3)):(console.log("something very strange just happened",t),d("Information of ".concat(o.name," has already been removed from server")),setTimeout((function(){d(null)}),3e3),a(n.filter((function(n){return n.id!==e}))))}))};return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("form",{onSubmit:function(e){e.preventDefault();var c={name:t,number:r};n.map((function(e){return e.name})).includes(t)?(window.confirm("".concat(t," is already added to phonebook, replace the old number with ").concat(r,"?")),h(n.filter((function(e){return e.name===t}))[0].id),o(""),u(""),console.log("number updated:",t)):j.create(c).then((function(e){a(n.concat(e)),o(""),u(""),m("Added ".concat(t," to contacts")),setTimeout((function(){m(null)}),3e3),console.log("added new contact",e)})).catch((function(e){t.length<3&&(d("Person validation failed: name: (".concat(t,") is shorter than the minimum allowed length (3).")),setTimeout((function(){d(null)}),3e3)),r.length<8&&(d("Person validation failed: number: (".concat(r,") is shorter than the minimum allowed length (8).")),setTimeout((function(){d(null)}),3e3)),r.length<8&&t.length<3&&(d("Person validation failed: name: (".concat(t,") is shorter than the minimum allowed length (3)., number: (").concat(r,") is shorter than the minimum allowed length (8).")),setTimeout((function(){d(null)}),3e3))}))},children:[Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h3",{children:" Add new contact"}),Object(s.jsx)("input",{placeholder:"Enter name",value:t,onChange:i})]}),Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("input",{placeholder:"Enter number",value:r,onChange:l})}),Object(s.jsx)("button",{type:"submit",children:"add"})]})})},g=function(e){var n=e.persons,t=e.removePerson;return Object(s.jsx)(s.Fragment,{children:Object(s.jsxs)("li",{children:[n.name," ",n.number," ",Object(s.jsx)("span",{children:"\xa0"}),Object(s.jsx)("button",{onClick:function(){return t(n.id)},children:"remove"})]})})},v=function(e){var n=e.persons,t=e.newFilter,r=e.showAllPersons,a=e.removePerson,c=r?n:n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())}));return Object(s.jsx)(s.Fragment,{children:Object(s.jsx)("ul",{className:"no-bullets",children:c.map((function(e){return Object(s.jsx)(g,{persons:e,removePerson:a},e.name)}))})})},O=function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"success",children:n})},w=(t(42),function(e){var n=e.message;return null===n?null:Object(s.jsx)("div",{className:"failure",children:n})}),x=function(){var e=Object(u.useState)([]),n=Object(o.a)(e,2),t=n[0],r=n[1],a=Object(u.useState)(""),l=Object(o.a)(a,2),m=l[0],d=l[1],h=Object(u.useState)(""),f=Object(o.a)(h,2),b=f[0],g=f[1],x=Object(u.useState)(""),N=Object(o.a)(x,2),F=N[0],C=N[1],P=Object(u.useState)(""),y=Object(o.a)(P,2),k=y[0],S=y[1],T=Object(u.useState)(""),A=Object(o.a)(T,2),E=A[0],M=A[1];Object(u.useEffect)((function(){j.getAll().then((function(e){r(e),console.log("current set of names",e)}))}),[]);return Object(s.jsxs)(s.Fragment,{children:[Object(s.jsx)("h2",{children:"Phonebook"}),Object(s.jsx)(O,{message:k}),Object(s.jsx)(w,{message:E}),Object(s.jsx)(i,{newFilter:F,handleFilterChange:function(e){C(e.target.value)}}),Object(s.jsx)(p,{persons:t,newName:m,newNumber:b,setPersons:r,setNewName:d,setNewNumber:g,handleNameChange:function(e){d(e.target.value)},handleNumberChange:function(e){g(e.target.value)},setNewSuccessMessage:S,setNewFailureMessage:M}),Object(s.jsx)("h2",{children:"Numbers"}),Object(s.jsx)(v,{persons:t,newFilter:F,removePerson:function(e){var n=Object(c.a)({},t.find((function(n){return n.id===e})));window.confirm("Delete '".concat(n.name,"'?"))&&j.remove(e).then((function(){r(t.filter((function(n){return n.id!==e}))),S("Removed ".concat(n.name," from contacts")),setTimeout((function(){S(null)}),3e3),console.log("Removed ".concat(n.name))})).catch((function(a){console.log("something very strange just happened",a),M("Information of ".concat(n.name," has already been removed from server")),setTimeout((function(){M(null)}),3e3),r(t.filter((function(n){return n.id!==e})))}))}})]})};a.a.render(Object(s.jsx)(x,{}),document.getElementById("root"))}},[[43,1,2]]]);
//# sourceMappingURL=main.da30e6f3.chunk.js.map